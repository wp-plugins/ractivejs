!function(t,e){"use strict";function i(t,e,i){return setTimeout(u(t,i),e)}function n(t,e,i){return Array.isArray(t)?(r(t,i[e],i),!0):!1}function r(t,i,n){var r,s;if(t)if(t.forEach)t.forEach(i,n);else if(t.length!==e)for(r=0,s=t.length;s>r;r++)i.call(n,t[r],r,t);else for(r in t)t.hasOwnProperty(r)&&i.call(n,t[r],r,t)}function s(t,i,n){for(var r=Object.keys(i),s=0,o=r.length;o>s;s++)(!n||n&&t[r[s]]===e)&&(t[r[s]]=i[r[s]]);return t}function o(t,e){return s(t,e,!0)}function a(t,e,i){var n,r=e.prototype;n=t.prototype=Object.create(r),n.constructor=t,n._super=r,i&&s(n,i)}function u(t,e){return function(){return t.apply(e,arguments)}}function h(t,i){return typeof t==re?t.apply(i?i[0]||e:e,i):t}function c(t,i){return t===e?i:t}function l(t,e,i){r(m(e),function(e){t.addEventListener(e,i,!1)})}function p(t,e,i){r(m(e),function(e){t.removeEventListener(e,i,!1)})}function f(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function d(t,e){return t.indexOf(e)>-1}function m(t){return t.trim().split(/\s+/g)}function v(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var n=0,r=t.length;r>n;n++)if(i&&t[n][i]==e||!i&&t[n]===e)return n;return-1}function g(t){return Array.prototype.slice.call(t,0)}function T(t,e){for(var i=[],n=[],r=0,s=t.length;s>r;r++){var o=e?t[r][e]:t[r];v(n,o)<0&&i.push(t[r]),n[r]=o}return i}function y(t,i){for(var n,r,s=i[0].toUpperCase()+i.slice(1),o=0,a=ie.length;a>o;o++)if(n=ie[o],r=n?n+s:i,r in t)return r;return e}function E(){return he++}function _(e,i){var n=this;this.manager=e,this.callback=i,this.domHandler=function(t){h(n.manager.options.enable,[n.manager])&&n.handler(t)},this.evEl&&l(this.manager.element,this.evEl,this.domHandler),this.evWin&&l(t,this.evWin,this.domHandler)}function A(t){var e;return new(e=pe?F:fe?X:le?x:O)(t,I)}function I(t,e,i){var n=i.pointers.length,r=i.changedPointers.length,s=e&ye&&n-r===0,o=e&(_e|Ae)&&n-r===0;i.isFirst=s,i.isFinal=o,s&&(t.session={}),i.eventType=e,S(t,i),t.emit("hammer.input",i),t.recognize(i)}function S(t,e){var i=t.session,n=e.pointers,r=n.length;i.firstInput||(i.firstInput=b(e)),r>1&&!i.firstMultiple?i.firstMultiple=b(e):1===r&&(i.firstMultiple=!1);var s=i.firstInput,o=i.firstMultiple,a=o?o.center:s.center,u=z(n);e.timeStamp=ue(),e.deltaTime=e.timeStamp-s.timeStamp,e.deltaX=u.x-a.x,e.deltaY=u.y-a.y,e.center=u,e.angle=C(a,u),e.distance=N(a,u),e.offsetDirection=R(e.deltaX,e.deltaY),e.scale=o?P(o.pointers,n):1,e.rotation=o?M(o.pointers,n):0;var h=t.element;f(e.srcEvent.target,h)&&(h=e.srcEvent.target),e.target=h,w(i,e)}function w(t,i){var n=t.lastInterval;n||(n=t.lastInterval=b(i));var r,s,o,a,u=i.timeStamp-n.timeStamp;if(u>Te||n.velocity===e){var h=n.deltaX-i.deltaX,c=n.deltaY-i.deltaY,l=D(u,h,c);s=l.x,o=l.y,r=ae(l.x)>ae(l.y)?l.x:l.y,a=R(h,c)}else r=n.velocity,s=n.velocityX,o=n.velocityY,a=n.direction;i.velocity=r,i.velocityX=s,i.velocityY=o,i.direction=a}function b(t){for(var e=[],i=0;i<t.pointers.length;i++)e[i]={clientX:oe(t.pointers[i].clientX),clientY:oe(t.pointers[i].clientY)};return{timeStamp:ue(),pointers:e,center:z(e),deltaX:t.deltaX,deltaY:t.deltaY}}function z(t){var e=t.length;if(1===e)return{x:oe(t[0].clientX),y:oe(t[0].clientY)};for(var i=0,n=0,r=0;e>r;r++)i+=t[r].clientX,n+=t[r].clientY;return{x:oe(i/e),y:oe(n/e)}}function D(t,e,i){return{x:e/t||0,y:i/t||0}}function R(t,e){return t===e?Ie:ae(t)>=ae(e)?t>0?Se:we:e>0?be:ze}function N(t,e,i){i||(i=Ce);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return Math.sqrt(n*n+r*r)}function C(t,e,i){i||(i=Ce);var n=e[i[0]]-t[i[0]],r=e[i[1]]-t[i[1]];return 180*Math.atan2(r,n)/Math.PI}function M(t,e){return C(e[1],e[0],Me)-C(t[1],t[0],Me)}function P(t,e){return N(e[0],e[1],Me)/N(t[0],t[1],Me)}function O(){this.evEl=Oe,this.evWin=Fe,this.allow=!0,this.pressed=!1,_.apply(this,arguments)}function F(){this.evEl=xe,this.evWin=qe,_.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function X(){this.evEl=We,this.targetIds={},_.apply(this,arguments)}function Y(t,e){var i,n,r=e.targetIds,s=g(t.targetTouches),o=g(t.changedTouches),a=[];if("touchstart"==t.type)for(i=0,n=s.length;n>i;i++)r[s[i].identifier]=!0;for(i=0,n=o.length;n>i;i++)r[o[i].identifier]&&a.push(o[i]),("touchend"==t.type||"touchcancel"==t.type)&&delete r[o[i].identifier];return[T(s.concat(a),"identifier"),a]}function x(){_.apply(this,arguments);var t=u(this.handler,this);this.touch=new X(this.manager,t),this.mouse=new O(this.manager,t)}function q(t,e){this.manager=t,this.set(e)}function L(t){if(d(t,Ve))return Ve;var e=d(t,Ze),i=d(t,Be);return e&&i?Ze+" "+Be:e||i?e?Ze:Be:d(t,je)?je:Ge}function W(t){this.id=E(),this.manager=null,this.options=o(t||{},this.defaults),this.options.enable=c(this.options.enable,!0),this.state=Je,this.simultaneous={},this.requireFail=[]}function H(t){return t&ei?"cancel":t&$e?"end":t&Qe?"move":t&Ke?"start":""}function k(t){return t==ze?"down":t==be?"up":t==Se?"left":t==we?"right":""}function U(t,e){var i=e.manager;return i?i.get(t):t}function G(){W.apply(this,arguments)}function j(){G.apply(this,arguments),this.pX=null,this.pY=null}function V(){G.apply(this,arguments)}function Z(){W.apply(this,arguments),this._timer=null,this._input=null}function B(){G.apply(this,arguments)}function J(){G.apply(this,arguments)}function K(){W.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Q(t,e){return e=e||{},e.recognizers=c(e.recognizers,Q.defaults.preset),new $(t,e)}function $(t,e){e=e||{},this.options=o(e,Q.defaults),this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=A(this),this.touchAction=new q(this,this.options.touchAction),te(this,!0),r(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[2])},this)}function te(t,e){var i=t.element,n=t.options.cssProps;r(n,function(t,n){i.style[y(i.style,n)]=e?t:""});var s=e&&function(){return!1};"none"==n.userSelect&&(i.onselectstart=s),"none"==n.userDrag&&(i.ondragstart=s)}function ee(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}var ie=["","webkit","moz","MS","ms","o"],ne=document.createElement("div"),re="function",se="undefined",oe=Math.round,ae=Math.abs,ue=Date.now,he=1,ce=/mobile|tablet|ip(ad|hone|od)|android/i,le="ontouchstart"in t,pe=y(t,"PointerEvent")!==e,fe=le&&ce.test(navigator.userAgent),de="touch",me="pen",ve="mouse",ge="kinect",Te=25,ye=1,Ee=2,_e=4,Ae=8,Ie=1,Se=2,we=4,be=8,ze=16,De=Se|we,Re=be|ze,Ne=De|Re,Ce=["x","y"],Me=["clientX","clientY"];_.prototype={handler:function(){},destroy:function(){this.elEvents&&p(this.manager.element,this.elEvents,this.domHandler),this.winEvents&&p(t,this.winEvents,this.domHandler)}};var Pe={mousedown:ye,mousemove:Ee,mouseup:_e,mouseout:Ae},Oe="mousedown",Fe="mousemove mouseout mouseup";a(O,_,{handler:function(t){var e=Pe[t.type];if(e&ye&&0===t.button&&(this.pressed=!0),e&Ee&&1!==t.which&&(e=_e),this.pressed&&this.allow){var i=t.relatedTarget||t.toElement||t.target;"mouseout"==t.type&&"HTML"!=i.nodeName&&(e=Ee),e&(_e|Ae)&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:ve,srcEvent:t})}}});var Xe={pointerdown:ye,pointermove:Ee,pointerup:_e,pointercancel:Ae,pointerout:Ae},Ye={2:de,3:me,4:ve,5:ge},xe="pointerdown",qe="pointermove pointerout pointerup pointercancel";t.MSPointerEvent&&(xe="MSPointerDown",qe="MSPointerMove MSPointerOut MSPointerUp MSPointerCancel"),a(F,_,{handler:function(t){var e=this.store,i=!1,n=t.type.toLowerCase().replace("ms",""),r=Xe[n],s=Ye[t.pointerType]||t.pointerType,o=t.relatedTarget||t.toElement||t.target;"pointerout"==n&&"HTML"!=o.nodeName&&(r=Ee),r&ye&&(0===t.button||s==de)?e.push(t):r&(_e|Ae)&&(i=!0);var a=v(e,t.pointerId,"pointerId");0>a||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var Le={touchstart:ye,touchmove:Ee,touchend:_e,touchcancel:Ae},We="touchstart touchmove touchend touchcancel";a(X,_,{handler:function(t){var e=Y(t,this);this.callback(this.manager,Le[t.type],{pointers:e[0],changedPointers:e[1],pointerType:de,srcEvent:t})}}),a(x,_,{handler:function(t,e,i){var n=i.pointerType==de,r=i.pointerType==ve;if(n)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(_e|Ae)&&(this.mouse.allow=!0),this.callback(t,e,i)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var He=y(ne.style,"touchAction"),ke=He!==e,Ue="compute",Ge="auto",je="manipulation",Ve="none",Ze="pan-x",Be="pan-y";q.prototype={set:function(t){t==Ue&&(t=this.compute()),ke&&(this.manager.element.style[He]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return r(this.manager.recognizers,function(e){h(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),L(t.join(" "))},preventDefaults:function(t){if(!ke){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var n=this.actions,r=d(n,Ve),s=d(n,Be),o=d(n,Ze);return r||s&&o||s&&i&De||o&&i&Re?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Je=1,Ke=2,Qe=4,$e=8,ti=$e,ei=16,ii=32;W.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(n(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=U(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return n(t,"dropRecognizeWith",this)?this:(t=U(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(n(t,"requireFailure",this))return this;var e=this.requireFail;return t=U(t,this),-1===v(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(n(t,"dropRequireFailure",this))return this;t=U(t,this);var e=v(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){this.manager.emit(this.options.event,t),this.manager.emit(this.options.event+H(this.state),t)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ii)},canEmit:function(){for(var t=0;t<this.requireFail.length;t++)if(!(this.requireFail[t].state&(ii|Je)))return!1;return!0},recognize:function(t){var e=s({},t);return h(this.options.enable,[this,e])?(this.state&(ti|ei|ii)&&(this.state=Je),this.state=this.process(e),void(this.state&(Ke|Qe|$e|ei)&&this.tryEmit(e))):(this.reset(),void(this.state=ii))},process:function(){},getTouchAction:function(){},reset:function(){}},a(G,W,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,n=e&(Ke|Qe),r=this.attrTest(t);return n&&(i&Ae||!r)?e|ei:n||r?i&_e?e|$e:e&Ke?e|Qe:Ke:ii}}),a(j,G,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ne},getTouchAction:function(){var t=this.options.direction;if(t===Ne)return[Ve];var e=[];return t&De&&e.push(Be),t&Re&&e.push(Ze),e},directionTest:function(t){var e=this.options,i=!0,n=t.distance,r=t.direction,s=t.deltaX,o=t.deltaY;return r&e.direction||(e.direction&De?(r=0===s?Ie:0>s?Se:we,i=s!=this.pX,n=Math.abs(t.deltaX)):(r=0===o?Ie:0>o?be:ze,i=o!=this.pY,n=Math.abs(t.deltaY))),t.direction=r,i&&n>e.threshold&&r&e.direction},attrTest:function(t){return G.prototype.attrTest.call(this,t)&&(this.state&Ke||!(this.state&Ke)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY,this._super.emit.call(this,t);var e=k(t.direction);e&&this.manager.emit(this.options.event+e,t)}}),a(V,G,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Ve]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&Ke)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),a(Z,W,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Ge]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,s=t.deltaTime>e.time;if(this._input=t,!r||!n||t.eventType&(_e|Ae)&&!s)this.reset();else if(t.eventType&ye)this.reset(),this._timer=i(function(){this.state=ti,this.tryEmit()},e.time,this);else if(t.eventType&_e)return ti;return ii},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ti&&(t&&t.eventType&_e?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ue(),this.manager.emit(this.options.event,this._input)))}}),a(B,G,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Ve]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&Ke)}}),a(J,G,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:De|Re,pointers:1},getTouchAction:function(){return j.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(De|Re)?e=t.velocity:i&De?e=t.velocityX:i&Re&&(e=t.velocityY),this._super.attrTest.call(this,t)&&i&t.direction&&ae(e)>this.options.velocity&&t.eventType&_e},emit:function(t){this.manager.emit(this.options.event,t);var e=k(t.direction);e&&this.manager.emit(this.options.event+e,t)}}),a(K,W,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[je]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,s=t.deltaTime<e.time;if(this.reset(),t.eventType&ye&&0===this.count)return this._failTimeout();if(r&&s&&n){if(t.eventType!=_e)return this._failTimeout();var o=this.pTime?t.timeStamp-this.pTime<e.interval:!0,a=!this.pCenter||N(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t;var u=this.count%e.taps;if(0===u)return this.hasRequireFailures()?(this._timer=i(function(){this.state=ti,this.tryEmit()},e.interval,this),Ke):ti}return ii},_failTimeout:function(){return this._timer=i(function(){this.state=ii},this.options.interval,this),ii},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ti&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Q.VERSION="2.0.1",Q.defaults={domEvents:!1,touchAction:Ue,enable:!0,preset:[[B,{enable:!1}],[V,{enable:!1},["rotate"]],[J,{direction:De}],[j,{direction:De},["swipe"]],[K],[K,{event:"doubletap",taps:2},["tap"]],[Z]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var ni=1,ri=2;$.prototype={set:function(t){return s(this.options,t),this},stop:function(t){this.session.stopped=t?ri:ni},recognize:function(t){if(!this.session.stopped){this.touchAction.preventDefaults(t);var e,i=this.session,n=i.curRecognizer;(!n||n&&n.state&ti)&&(n=i.curRecognizer=null);for(var r=0,s=this.recognizers.length;s>r;r++)e=this.recognizers[r],this.session.stopped===ri||n&&e!=n&&!e.canRecognizeWith(n)?e.reset():e.recognize(t),!n&&e.state&(Ke|Qe|$e)&&(n=i.curRecognizer=e)}},get:function(t){if(t instanceof W)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(n(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(n(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(v(e,t),1),this.touchAction.update(),this},on:function(t,e){var i=this.handlers;return r(m(t),function(t){i[t]=i[t]||[],i[t].push(e)}),this},off:function(t,e){var i=this.handlers;return r(m(t),function(t){e?i[t].splice(v(i[t],e),1):delete i[t]}),this},emit:function(t,e){this.options.domEvents&&ee(t,e);var i=this.handlers[t];if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0,r=i.length;r>n;n++)i[n](e)}},destroy:function(){this.element&&te(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(Q,{INPUT_START:ye,INPUT_MOVE:Ee,INPUT_END:_e,INPUT_CANCEL:Ae,STATE_POSSIBLE:Je,STATE_BEGAN:Ke,STATE_CHANGED:Qe,STATE_ENDED:$e,STATE_RECOGNIZED:ti,STATE_CANCELLED:ei,STATE_FAILED:ii,DIRECTION_NONE:Ie,DIRECTION_LEFT:Se,DIRECTION_RIGHT:we,DIRECTION_UP:be,DIRECTION_DOWN:ze,DIRECTION_HORIZONTAL:De,DIRECTION_VERTICAL:Re,DIRECTION_ALL:Ne,Manager:$,Input:_,TouchAction:q,Recognizer:W,AttrRecognizer:G,Tap:K,Pan:j,Swipe:J,Pinch:V,Rotate:B,Press:Z,on:l,off:p,each:r,merge:o,extend:s,inherit:a,bindFn:u,prefixed:y}),typeof define==re&&define.amd?define(function(){return Q}):typeof module!=se&&module.exports?module.exports=Q:t.Hammer=Q}(window);
