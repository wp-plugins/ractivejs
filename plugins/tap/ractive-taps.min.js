!function(e,n){"use strict";if("undefined"!=typeof module&&module.exports&&"function"==typeof require)n(require("ractive"));else if("function"==typeof define&&define.amd)define(["ractive"],n);else{if(!e.Ractive)throw new Error("Could not find Ractive! It must be loaded before the ractive-events-tap plugin");n(e.Ractive)}}("undefined"!=typeof window?window:this,function(e){"use strict";var n=function(e,n){var t,i,o,r,d,v,c;return r=5,d=400,t=function(t){var i,o,c,a,s,u,m;v||(void 0===t.which||1===t.which)&&(o=t.clientX,c=t.clientY,i=this,a=t.pointerId,s=function(e){e.pointerId==a&&(n({node:i,original:e}),m())},u=function(e){e.pointerId==a&&(Math.abs(e.clientX-o)>=r||Math.abs(e.clientY-c)>=r)&&m()},m=function(){e.removeEventListener("MSPointerUp",s,!1),document.removeEventListener("MSPointerMove",u,!1),document.removeEventListener("MSPointerCancel",m,!1),e.removeEventListener("pointerup",s,!1),document.removeEventListener("pointermove",u,!1),document.removeEventListener("pointercancel",m,!1),e.removeEventListener("click",s,!1),document.removeEventListener("mousemove",u,!1)},window.navigator.pointerEnabled?(e.addEventListener("pointerup",s,!1),document.addEventListener("pointermove",u,!1),document.addEventListener("pointercancel",m,!1)):window.navigator.msPointerEnabled?(e.addEventListener("MSPointerUp",s,!1),document.addEventListener("MSPointerMove",u,!1),document.addEventListener("MSPointerCancel",m,!1)):(e.addEventListener("click",s,!1),document.addEventListener("mousemove",u,!1)),setTimeout(m,d))},window.navigator.pointerEnabled?e.addEventListener("pointerdown",t,!1):window.navigator.msPointerEnabled?e.addEventListener("MSPointerDown",t,!1):e.addEventListener("mousedown",t,!1),i=function(t){var i,o,a,s,u,m,E,f;1===t.touches.length&&(s=t.touches[0],o=s.clientX,a=s.clientY,i=this,u=s.identifier,E=function(e){var t;t=e.changedTouches[0],t.identifier!==u&&f(),e.preventDefault(),v=!0,clearTimeout(c),c=setTimeout(function(){v=!1},400),n({node:i,original:e}),f()},m=function(e){var n;(1!==e.touches.length||e.touches[0].identifier!==u)&&f(),n=e.touches[0],(Math.abs(n.clientX-o)>=r||Math.abs(n.clientY-a)>=r)&&f()},f=function(){e.removeEventListener("touchend",E,!1),window.removeEventListener("touchmove",m,!1),window.removeEventListener("touchcancel",f,!1)},e.addEventListener("touchend",E,!1),window.addEventListener("touchmove",m,!1),window.addEventListener("touchcancel",f,!1),setTimeout(f,d))},e.addEventListener("touchstart",i,!1),("BUTTON"===e.tagName||"button"===e.type)&&(o=function(){var t,i;i=function(t){32===t.which&&n({node:e,original:t})},t=function(){e.removeEventListener("keydown",i,!1),e.removeEventListener("blur",t,!1)},e.addEventListener("keydown",i,!1),e.addEventListener("blur",t,!1)},e.addEventListener("focus",o,!1)),{teardown:function(){e.removeEventListener("pointerdown",t,!1),e.removeEventListener("MSPointerDown",t,!1),e.removeEventListener("mousedown",t,!1),e.removeEventListener("touchstart",i,!1),e.removeEventListener("focus",o,!1)}}};e.events.tap=n});
